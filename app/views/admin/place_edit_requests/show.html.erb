<h2 class="mb-4 text-center">編集リクエスト詳細</h2>

<div class="mb-3">
  <strong>リクエストユーザー：</strong>
  <%= @place_edit_request.user.nickname %>
</div>

<% if @place.present? %>
  <h4 class="mt-4">施設の現在の情報</h4>
  <div class="mb-3">
    <strong>施設名：</strong>
    <%= link_to @place.name, admin_place_path(@place), class: "text-decoration-none" %>
  </div>
<% else %>
  <p>施設情報が見つかりません。</p>
<% end %>

<div class="mb-3">
  <strong>住所：</strong>
  <%= @place.address %>
</div>

<div class="row">
  <div class="col-12 col-md-4 mb-3">
    <strong>授乳室:</strong>
    <% if @place.nursery %>
      <span class="text-success"><i class="fa-regular fa-circle mr-2"></i>あり</span>
    <% else %>
      <span class="text-danger"><i class="fa-solid fa-xmark mr-2"></i>なし</span>
    <% end %>
  </div>
  <div class="col-12 col-md-4 mb-3">
    <strong>おむつ交換台:</strong>
    <% if @place.diaper %>
      <span class="text-success"><i class="fa-regular fa-circle mr-2"></i>あり</span>
    <% else %>
      <span class="text-danger"><i class="fa-solid fa-xmark mr-2"></i>なし</span>
    <% end %>
  </div>  

  <div class="col-12 col-md-4 mb-3">
    <strong>幼児トイレ:</strong>
    <% if @place.kids_toilet %>
      <span class="text-success"><i class="fa-regular fa-circle mr-2"></i>あり</span>
    <% else %>
      <span class="text-danger"><i class="fa-solid fa-xmark mr-2"></i>なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>ベビーカー対応:</strong>
    <% if @place.stroller %>
      <span class="text-success"><i class="fa-regular fa-circle mr-2"></i>あり</span>
    <% else %>
      <span class="text-danger"><i class="fa-solid fa-xmark mr-2"></i>なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>遊具:</strong>
    <% if @place.playground %>
      <span class="text-success"><i class="fa-regular fa-circle mr-2"></i>あり</span>
    <% else %>
      <span class="text-danger"><i class="fa-solid fa-xmark mr-2"></i>なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>木陰:</strong>
    <% if @place.shade %>
      <span class="text-success"><i class="fa-regular fa-circle mr-2"></i>あり</span>
    <% else %>
      <span class="text-danger"><i class="fa-solid fa-xmark mr-2"></i>なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>エレベーター:</strong>
    <% if @place.elevator %>
      <span class="text-success"><i class="fa-regular fa-circle mr-2"></i>あり</span>
    <% else %>
      <span class="text-danger"><i class="fa-solid fa-xmark mr-2"></i>なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>駐車場:</strong>
    <% if @place.parking %>
      <span class="text-success"><i class="fa-regular fa-circle mr-2"></i>あり</span>
    <% else %>
      <span class="text-danger"><i class="fa-solid fa-xmark mr-2"></i>なし</span>
    <% end %>
  </div>  
</div>

<h4 class="mt-4">編集リクエストでの変更内容</h4>
<div class="row">
  <div class="col-12 col-md-4 mb-3">
    <strong>施設名:</strong>
    <% if @place_edit_request.name != @place.name %>
      <span class="text-warning"><i class="fa-solid fa-pencil-alt mr-2"></i>変更あり: <%= @place_edit_request.name %></span>
    <% else %>
      <span class="text-muted">変更なし</span>
    <% end %>
  </div>
  
    <div class="col-12 col-md-4 mb-3">
      <strong>カテゴリ:</strong>
        <% if @place_edit_request.category != @place.category %>
          <% if @place_edit_request.category == "facility" %>
            <span class="text-warning"><i class="fa-solid fa-pencil-alt mr-2"></i>変更あり: 施設</span>
          <% elsif @place_edit_request.category == "park" %>
            <span class="text-warning"><i class="fa-solid fa-pencil-alt mr-2"></i>変更あり: 公園</span>
          <% end %>
        <% else %>
          <span class="text-muted">変更なし</span>
        <% end %>    
    </div>
  
    <div class="col-12 col-md-4 mb-3">    
      <strong>授乳室:</strong>
        <% if @place_edit_request.nursery != @place.nursery %>
          <% if @place_edit_request.nursery %>
            <span class="text-warning">変更あり: <i class="fa-regular fa-circle mr-2"></i>あり</span>
          <% else %>
            <span class="text-warning">変更あり: <i class="fa-solid fa-xmark mr-2"></i>なし</span>
          <% end %>
        <% else %>
          <span class="text-muted">変更なし</span>
        <% end %>
      </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>おむつ交換台:</strong>
    <% if @place_edit_request.diaper != @place.diaper %>
      <% if @place_edit_request.diaper %>
        <span class="text-warning">変更あり: <i class="fa-regular fa-circle mr-2"></i>あり</span>
      <% else %>
        <span class="text-warning">変更あり: <i class="fa-solid fa-xmark mr-2"></i>なし</span>
      <% end %>
    <% else %>
      <span class="text-muted">変更なし</span>
    <% end %>
  </div>  

  <div class="col-12 col-md-4 mb-3">
    <strong>幼児トイレ:</strong>
    <% if @place_edit_request.kids_toilet != @place.kids_toilet %>
      <% if @place_edit_request.kids_toilet %>
        <span class="text-warning">変更あり: <i class="fa-regular fa-circle mr-2"></i>あり</span>
      <% else %>
        <span class="text-warning">変更あり: <i class="fa-solid fa-xmark mr-2"></i>なし</span>
      <% end %>
    <% else %>
      <span class="text-muted">変更なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>ベビーカー対応:</strong>
    <% if @place_edit_request.stroller != @place.stroller %>
      <% if @place_edit_request.stroller %>
        <span class="text-warning">変更あり: <i class="fa-regular fa-circle mr-2"></i>あり</span>
      <% else %>
        <span class="text-warning">変更あり: <i class="fa-solid fa-xmark mr-2"></i>なし</span>
      <% end %>
    <% else %>
      <span class="text-muted">変更なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>遊具:</strong>
    <% if @place_edit_request.playground != @place.playground %>
      <% if @place_edit_request.playground %>
        <span class="text-warning">変更あり: <i class="fa-regular fa-circle mr-2"></i>あり</span>
      <% else %>
        <span class="text-warning">変更あり: <i class="fa-solid fa-xmark mr-2"></i>なし</span>
      <% end %>
    <% else %>
      <span class="text-muted">変更なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>木陰:</strong>
    <% if @place_edit_request.shade != @place.shade %>
      <% if @place_edit_request.shade %>
        <span class="text-warning">変更あり: <i class="fa-regular fa-circle mr-2"></i>あり</span>
      <% else %>
        <span class="text-warning">変更あり: <i class="fa-solid fa-xmark mr-2"></i>なし</span>
      <% end %>
    <% else %>
      <span class="text-muted">変更なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>ベンチ:</strong>
    <% if @place_edit_request.bench != @place.bench %>
      <% if @place_edit_request.bench %>
        <span class="text-warning">変更あり: <i class="fa-regular fa-circle mr-2"></i>あり</span>
      <% else %>
        <span class="text-warning">変更あり: <i class="fa-solid fa-xmark mr-2"></i>なし</span>
      <% end %>
    <% else %>
      <span class="text-muted">変更なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>エレベーター:</strong>
    <% if @place_edit_request.elevator != @place.elevator %>
      <% if @place_edit_request.elevator %>
        <span class="text-warning">変更あり: <i class="fa-regular fa-circle mr-2"></i>あり</span>
      <% else %>
        <span class="text-warning">変更あり: <i class="fa-solid fa-xmark mr-2"></i>なし</span>
      <% end %>
    <% else %>
      <span class="text-muted">変更なし</span>
    <% end %>
  </div>

  <div class="col-12 col-md-4 mb-3">
    <strong>駐車場:</strong>
    <% if @place_edit_request.parking != @place.parking %>
      <% if @place_edit_request.parking %>
        <span class="text-warning">変更あり: <i class="fa-regular fa-circle mr-2"></i>あり</span>
      <% else %>
        <span class="text-warning">変更あり: <i class="fa-solid fa-xmark mr-2"></i>なし</span>
      <% end %>
    <% else %>
      <span class="text-muted">変更なし</span>
    <% end %>
  </div> 
</div>

<% if @place_edit_request.photos.attached? %>
  <div class="mb-3">
    <strong>画像：</strong><br>
    <% @place_edit_request.photos.each do |image| %>
      <%= image_tag image, class: "img-thumbnail me-2 mb-2" %>
    <% end %>
  </div>
<% end %>

<div class="d-flex justify-content-center align-items-center mt-4">
  <div class="text-center">
    <% if @place_edit_request.pending? %>      
      <%= form_with url: admin_place_edit_request_path(@place_edit_request), method: :patch, local: true do |f| %>
        <div class="d-flex justify-content-center">
          <%= f.hidden_field :status, value: :approved %>
          <%= f.submit '承認', class: "btn btn-success mr-3" %>
        </div>
      <% end %>

      <%= form_with url: admin_place_edit_request_path(@place_edit_request), method: :patch, local: true do |f| %>
        <div class="d-flex justify-content-center mt-2">
          <%= f.hidden_field :status, value: :rejected %>
          <%= f.submit '却下', class: "btn btn-danger mr-3" %>
        </div>
      <% end %>
    <% else %>
      <div class="alert alert-info mt-3">
        このリクエストはすでに <strong><%= @place_edit_request.status_i18n %></strong> されています。
      </div>
    <% end %>
  </div>
</div>